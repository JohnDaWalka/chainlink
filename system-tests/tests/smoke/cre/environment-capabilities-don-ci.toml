
[blockchain_a]
  type = "anvil"
  chain_id = "1337"

[custom_anvil_miner]
  block_speed_seconds = 5

[jd]
  image = "injected-at-runtime"

[infra]
  # either "docker" or "crib"
  type = "docker"

[workflow_config]
  workflow_name = "abcdefgasd"
  # 0x01 8e16c39e 0000 20 0000000000000000 = ETH/USD Benchmark Price with 0 decimals
  feed_id = "018e16c39e000320000000000000000000000000000000000000000000000000"

  use_cre_cli = true
  should_compile_new_workflow = false

  [workflow_config.dependencies]
  cron_capability_binary_path = "./cron"
  cre_cli_binary_path = "./cre_v0.1.5_linux_amd64"

  [workflow_config.compiled_config]
    binary_url = "https://gist.githubusercontent.com/Tofel/1a2f6f7d9424bcb176a7cee31112bc11/raw/0e3859564f92c141cb856c65ef7a3db711588c08/binary.wasm.br.b64"
    config_url = "https://gist.githubusercontent.com/Tofel/ee33265710f482d21854c52b7c75652e/raw/5a53b2214c46d0058a7c30f4edf5d40c318d60a8/three-dons-config.json_07_04_2025"

[[nodesets]]
  nodes = 5
  override_mode = "all"
  http_port_range_start = 10100
  name = "workflow"

  [nodesets.db]
    image = "postgres:12.0"
    port = 13000
    volume_name = "workflow_volume"

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      image = "injected-at-runtime"
      # ommitted on purpose, if not defined here it will be added by Go code if worker nodes from this DON have cron capability
      # capabilities = ['./cron']
      user_config_overrides = """
      [Feature]
			LogPoller = true

      [Log]
      Level = 'debug'
      JSONConsole = true

			[OCR2]
			Enabled = true
			DatabaseTimeout = '1s'

			[P2P.V2]
			Enabled = true
			ListenAddresses = ['0.0.0.0:5001']
      """

[[nodesets]]
  nodes = 2
  override_mode = "all"
  http_port_range_start = 10200
  name = "capabilities"

  [nodesets.db]
    image = "postgres:12.0"
    port = 13100
    volume_name = "capabilities_volume"

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      image = "injected-at-runtime"
      user_config_overrides = """
      [Feature]
			LogPoller = true

      [Log]
      Level = 'debug'
      JSONConsole = true

			[OCR2]
			Enabled = true
			DatabaseTimeout = '1s'

			[P2P.V2]
			Enabled = true
			ListenAddresses = ['0.0.0.0:5001']
      """

[[nodesets]]
  nodes = 1
  override_mode = "all"
  http_port_range_start = 10300
  name = "gateway"

  [nodesets.db]
    image = "postgres:12.0"
    port = 13200

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      image = "injected-at-runtime"
      user_config_overrides = """
      [Feature]
			LogPoller = true

      [Log]
      Level = 'debug'
      JSONConsole = true

			[OCR2]
			Enabled = true
			DatabaseTimeout = '1s'

			[P2P.V2]
			Enabled = true
			ListenAddresses = ['0.0.0.0:5001']
      """

# this configuration should be used to override environment-capabilities-don.toml with CRIB-specific settings

[infra]
  # either "docker" or "crib"
  type = "crib"

  [infra.crib]
  namespace = "crib-local"
  folder_location = "/Users/bartektofel/Desktop/repos/crib/deployments/cre"
  # either "aws" or "kind"
  provider = "kind"

[[nodesets]]
  nodes = 5
  override_mode = "all"
  http_port_range_start = 10100
  name = "workflow"

  [nodesets.db]
    image = "postgres:12.0"
    port = 13000

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      image = "localhost:5001/chainlink:e530f1c"
      # omitted on purpose, if not defined here it will be added by Go code if worker nodes from this DON have cron capability
      # capabilities = ['./cron']
      user_config_overrides = """
      [Feature]
			LogPoller = true

      [Log]
      Level = 'debug'
      JSONConsole = true

			[OCR2]
			Enabled = true
			DatabaseTimeout = '1s'

			[P2P.V2]
			Enabled = true
			ListenAddresses = ['0.0.0.0:5001']
      """

[[nodesets]]
  nodes = 2
  override_mode = "all"
  http_port_range_start = 10200
  name = "capability"

  [nodesets.db]
    image = "postgres:12.0"
    port = 13100

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      image = "localhost:5001/chainlink:e530f1c"
      user_config_overrides = """
      [Feature]
			LogPoller = true

      [Log]
      Level = 'debug'
      JSONConsole = true

			[OCR2]
			Enabled = true
			DatabaseTimeout = '1s'

			[P2P.V2]
			Enabled = true
			ListenAddresses = ['0.0.0.0:5001']
      """

[[nodesets]]
  nodes = 1
  override_mode = "all"
  http_port_range_start = 10300
  name = "gateway"

  [nodesets.db]
    image = "postgres:12.0"
    port = 13200

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      image = "localhost:5001/chainlink:e530f1c"
      user_config_overrides = """
      [Feature]
			LogPoller = true

      [Log]
      Level = 'debug'
      JSONConsole = true

			[OCR2]
			Enabled = true
			DatabaseTimeout = '1s'

			[P2P.V2]
			Enabled = true
			ListenAddresses = ['0.0.0.0:5001']
      """